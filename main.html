<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>游戏大厅</title>
		<link rel="stylesheet" type="text/css" href="css/game.css"/>
		<script src="js/player.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div class="main-con">
			<div class="userinfo">
				<h1></h1>
				<p></p>
				<p></p>
			</div>
			<div class="online">
				<div class="online-top">
					<h2>在线玩家</h2>
					<span>78/100</span>
					<div class="clear"></div>
				</div>
				<div class="online-bottom">
					<table></table>
				</div>
			</div>
			<div class="room">
					<h2>房间</h2>
					<div class="roombottom">
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
						<div class="fangjian">
							<img src="img/room.png"/>
							<p>输光光</p>
						</div>
					</div>
			</div>
			<div class="chat">
				<h2>聊天信息</h2>
				<div class="body">
						<ul>
							<li>玩家一：这个游戏怎么玩？</li>
							<li>玩家一：这个游戏怎么玩？</li>
							<li>玩家一：这个游戏怎么玩？</li>
							<li style="text-align: right;">玩家二：这个游戏很容易!</li>
						</ul>
				</div>
				<div class="footer">
					<input type="text" name="" id="" />
					<button onclick="goMain()">发送</button>
				</div>
			</div>
			<input type="text" name="" id="" placeholder="请输入房间号" />
		    <button onclick="goMain()">进入</button>
		</div>
	</body>
	<script src="js/jquery-1.10.2.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		$(function(){
			var user = localStorage.getItem("user");
			if(!user){
				window.location.href="login.html";
			}else{
				user = JSON.parse(user)
			}
			initUser(user);
			initOnline( users );
		});
		
		function initUser( user ){
			$(".userinfo h1").html(user.username).next().html("ID:" + user.id)
			                 .next().html("胜场：" + user.win +"胜率：" + (user.total ? user.win/user.total : 0) + "%");
		}
		
		function initOnline( users ){
			var html ="";
			for( var i = 0;i < users.length;i++){
				var temp =users[i];
				html += '<tr>';
	            html += '<td>' + temp.username +'</td>';
				html += '<td>' + temp.id + '</td>';
				html += '<td>' + getStatus(temp.line) + '</td>';
				html += '</tr>';
			}
			$(".online table").html(html);
		}
		
		function getStatus( line ){
			if (line == 1){
				return "在线";
			}else if(line == 2){
				return "准备中";
			}else if(line == 3){
				return "游戏中";
			}else if(line == 4){
				return "离线";
			}
		}
	</script>
</html>
